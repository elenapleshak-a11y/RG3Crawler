<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Migration Auditor - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∞–π—Ç–æ–≤</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üîç SEO Migration Auditor</h1>
        <p class="subtitle">–≠—Ç–∞–ø 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ —Å–∞–π—Ç–æ–≤</p>
        
        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø –ú–ï–ñ–î–£ –†–ï–ñ–ò–ú–ê–ú–ò -->
        <div class="mode-navigation">
            <button class="mode-btn active" onclick="switchMode('crawl')">üï∑Ô∏è –ö—Ä–∞—É–ª–∏–Ω–≥</button>
            <button class="mode-btn" onclick="switchMode('compare')">‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
        </div>

        <!-- –†–ï–ñ–ò–ú –ö–†–ê–£–õ–ò–ù–ì–ê (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) -->
        <div id="crawlMode" class="mode-content active">
            <!-- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ–æ—Ä–º–∞ –∫—Ä–∞—É–ª–∏–Ω–≥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
            <div class="input-section">
                <div class="input-group">
                    <label for="urlInput">URL —Å–∞–π—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</label>
                    <input type="url" id="urlInput" placeholder="https://example.com" required>
                </div>
                
                <div class="settings-grid">
                    <!-- ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—Ä–∞—É–ª–∏–Ω–≥–∞ ... -->
                </div>
            </div>

            <div class="controls">
                <button id="crawlBtn" onclick="startCrawling()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫—Ä–∞—É–ª–∏–Ω–≥</button>
                <button id="stopBtn" onclick="stopCrawling()" style="display: none;">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button id="pauseBtn" onclick="togglePause()" style="display: none;">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
            </div>

            <!-- ... –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Ä–µ–∂–∏–º–∞ –∫—Ä–∞—É–ª–∏–Ω–≥–∞ ... -->
        </div>

        <!-- –ù–û–í–´–ô –†–ï–ñ–ò–ú –°–†–ê–í–ù–ï–ù–ò–Ø -->
        <div id="compareMode" class="mode-content">
            <div class="input-section">
                <h3>‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Å–∞–π—Ç–æ–≤</h3>
                
                <div class="comparison-inputs">
                    <div class="site-input">
                        <label for="oldSiteUrl">–°—Ç–∞—Ä—ã–π —Å–∞–π—Ç (–∏—Å—Ö–æ–¥–Ω—ã–π):</label>
                        <input type="url" id="oldSiteUrl" placeholder="https://old-site.com" required>
                        <div class="site-status" id="oldSiteStatus"></div>
                    </div>
                    
                    <div class="site-input">
                        <label for="newSiteUrl">–ù–æ–≤—ã–π —Å–∞–π—Ç (—Ü–µ–ª–µ–≤–æ–π):</label>
                        <input type="url" id="newSiteUrl" placeholder="https://new-site.com" required>
                        <div class="site-status" id="newSiteStatus"></div>
                    </div>
                </div>

                <div class="comparison-settings">
                    <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:</h4>
                    <div class="settings-grid">
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="autoMapUrls" checked>
                                üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ URL
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="checkRedirects" checked>
                                üîÄ –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="checkBrokenLinks" checked>
                                ‚ùå –ü—Ä–æ–≤–µ—Ä—è—Ç—å –±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏
                            </label>
                        </div>
                        
                        <div class="input-group">
                            <label for="urlMappingFile">–§–∞–π–ª —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è URL (CSV):</label>
                            <input type="file" id="urlMappingFile" accept=".csv">
                            <small>–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: CSV —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ old_url, new_url</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="compareBtn" onclick="startComparison()">‚öñÔ∏è –ù–∞—á–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
                <button id="stopCompareBtn" onclick="stopComparison()" style="display: none;">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
            <div class="progress-section" id="compareProgressSection" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="compareProgressFill"></div>
                </div>
                <div class="progress-info" id="compareProgressInfo"></div>
                
                <div class="stats-grid" id="compareStatsGrid"></div>
                
                <div class="log-container">
                    <h3>–ñ—É—Ä–Ω–∞–ª —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:</h3>
                    <div class="log" id="compareLog"></div>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
            <div class="results-section" id="compareResultsSection" style="display: none;">
                <h2>‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
                <div class="results-stats" id="compareResultsStats"></div>
                
                <div class="tabs">
                    <button class="tab-button active" onclick="openCompareTab('summary')">–°–≤–æ–¥–∫–∞</button>
                    <button class="tab-button" onclick="openCompareTab('comparison')">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ URL</button>
                    <button class="tab-button" onclick="openCompareTab('redirects')">–†–µ–¥–∏—Ä–µ–∫—Ç—ã</button>
                    <button class="tab-button" onclick="openCompareTab('broken')">–ë–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏</button>
                    <button class="tab-button" onclick="openCompareTab('missing')">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ</button>
                    <button class="tab-button" onclick="openCompareTab('warnings')">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</button>
                </div>
                
                <div class="tab-content">
                    <div id="summary" class="tab-pane active">
                        <h3>üìä –°–≤–æ–¥–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
                        <div class="summary-cards" id="summaryCards"></div>
                        <div class="export-buttons">
                            <button onclick="exportComparisonXLSX()">üìä Excel –æ—Ç—á–µ—Ç</button>
                            <button onclick="exportComparisonJSON()">üîÆ JSON –¥–∞–Ω–Ω—ã–µ</button>
                            <button onclick="exportComparisonSummary()">üìã –°–≤–æ–¥–∫–∞ (CSV)</button>
                        </div>
                    </div>
                    
                    <div id="comparison" class="tab-pane">
                        <h3>üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ URL</h3>
                        <div class="filter-controls">
                            <input type="text" id="comparisonFilter" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ URL..." onkeyup="filterComparisonTable()">
                            <select id="statusFilter" onchange="filterComparisonTable()">
                                <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="identical">–ò–¥–µ–Ω—Ç–∏—á–Ω—ã–µ</option>
                                <option value="differences">–ï—Å—Ç—å –æ—Ç–ª–∏—á–∏—è</option>
                                <option value="missing_new">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ –Ω–æ–≤–æ–º</option>
                                <option value="missing_old">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ —Å—Ç–∞—Ä–æ–º</option>
                            </select>
                        </div>
                        <div class="urls-table" id="comparisonTable"></div>
                    </div>
                    
                    <div id="redirects" class="tab-pane">
                        <h3>üîÄ –†–µ–¥–∏—Ä–µ–∫—Ç—ã</h3>
                        <div class="urls-table" id="redirectsTable"></div>
                    </div>
                    
                    <div id="broken" class="tab-pane">
                        <h3>‚ùå –ë–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤–æ–º —Å–∞–π—Ç–µ</h3>
                        <div class="urls-table" id="brokenLinksTable"></div>
                    </div>
                    
                    <div id="missing" class="tab-pane">
                        <h3>üì≠ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                        <div class="missing-tabs">
                            <button class="subtab-button active" onclick="openMissingTab('missingNew')">–ù–∞ –Ω–æ–≤–æ–º —Å–∞–π—Ç–µ</button>
                            <button class="subtab-button" onclick="openMissingTab('missingOld')">–ù–∞ —Å—Ç–∞—Ä–æ–º —Å–∞–π—Ç–µ</button>
                        </div>
                        <div class="subtab-content">
                            <div id="missingNew" class="subtab-pane active">
                                <div class="urls-table" id="missingNewTable"></div>
                            </div>
                            <div id="missingOld" class="subtab-pane">
                                <div class="urls-table" id="missingOldTable"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="warnings" class="tab-pane">
                        <h3>‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h3>
                        <div class="warnings-list" id="warningsList"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="error" id="error"></div>
    </div>

    <script src="crawler.js"></script>
    <script src="comparison.js"></script>
</body>
</html>
